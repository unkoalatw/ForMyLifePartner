<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>çµ¦èœåˆ€çš„è–èª•å¡ç‰‡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700;900&family=Parisienne&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Noto Serif TC', serif;
            background: #0f172a;
            overflow-x: hidden;
            min-height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            padding: 20px;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }

        /* èƒŒæ™¯æ¼¸å±¤å‹•ç•« */
        .bg-animated {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
            z-index: -2;
        }

        /* ç£¨ç ‚ç»ç’ƒå¡ç‰‡ (Spotlight Effect) */
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            animation: float 6s ease-in-out infinite;
            z-index: 10;
        }
        
        .glass-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(
                800px circle at var(--x, 50%) var(--y, 50%), 
                rgba(255, 255, 255, 0.15), 
                transparent 40%
            );
            z-index: 0;
            pointer-events: none;
            opacity: 1;
            transition: opacity 0.5s;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        /* Love Battery */
        .love-battery {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 10px;
            color: #4ade80;
            z-index: 2;
        }

        /* é‡‘è‰²æ–‡å­—ç‰¹æ•ˆ */
        .gold-text {
            background: linear-gradient(135deg, #FFF 0%, #FFD700 50%, #B8860B 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0px 4px 10px rgba(0,0,0,0.3);
            position: relative;
        }
        
        /* æµæ˜Ÿ & é›ªèŠ± */
        .shooting-star {
            position: absolute;
            left: 50%;
            top: 50%;
            height: 2px;
            background: linear-gradient(-45deg, rgba(95, 145, 255, 1), rgba(0, 0, 255, 0));
            border-radius: 999px;
            filter: drop-shadow(0 0 6px rgba(105, 155, 255, 1));
            animation: tail 3000ms ease-in-out infinite, shooting 3000ms ease-in-out infinite;
        }
        @keyframes tail { 0% { width: 0; } 30% { width: 100px; } 100% { width: 0; } }
        @keyframes shooting { 0% { transform: translateX(0) translateY(0) rotateZ(45deg); } 100% { transform: translateX(300px) translateY(300px) rotateZ(45deg); } }

        .snowflake {
            position: absolute;
            top: -10px;
            color: #fff;
            opacity: 0.8;
            z-index: 1;
            user-select: none;
            pointer-events: none;
            animation: fall linear infinite, sway ease-in-out infinite;
        }
        @keyframes fall { to { top: 120%; } }
        @keyframes sway { 50% { transform: translateX(15px); } }

        /* é»æ“Šæ„›å¿ƒ */
        .click-heart {
            position: fixed;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
            z-index: 100;
        }
        @keyframes floatUp { to { transform: translateY(-100px) scale(1.5) rotate(20deg); opacity: 0; } }

        /* å°é¢èˆ‡åˆ‡æ› */
        #intro-screen {
            position: fixed;
            inset: 0;
            z-index: 50;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(5px);
            transition: opacity 0.8s ease-out;
        }
        #main-card {
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 1s ease, transform 1s ease;
        }
        .show-card { opacity: 1 !important; transform: scale(1) !important; }
        .hidden-screen { opacity: 0 !important; pointer-events: none !important; }

        /* è§£é–æŒ‰éˆ• */
        .unlock-btn {
            position: relative;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.2s;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.1);
        }
        .unlock-btn:active { transform: scale(0.95); }

        .progress-ring__circle {
            transition: stroke-dashoffset 0.1s linear;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        /* çœŸå¿ƒè©± & æ‰“å­—æ©Ÿ */
        .secret-message {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.8s ease-in-out, opacity 0.8s ease-in-out;
            opacity: 0;
        }
        .secret-revealed { max-height: 400px; opacity: 1; }
        
        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        #fireworks-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 99; }
    </style>
</head>
<body onclick="spawnHeart(event)">

    <div class="bg-animated"></div>

    <canvas id="fireworks-canvas"></canvas>
    <div id="star-container" class="fixed inset-0 pointer-events-none" style="z-index: -1;"></div>
    <div id="snow-container" class="fixed inset-0 pointer-events-none overflow-hidden" style="z-index: 1;"></div>

    <!-- 1. å°é¢ -->
    <div id="intro-screen">
        <div class="glass-card p-10 rounded-2xl text-center border border-yellow-500/20 max-w-sm w-full mx-6 transform transition hover:scale-105 duration-500" onclick="openCard(event)">
            <div class="text-6xl mb-4 animate-bounce">ğŸ’Œ</div>
            <p class="text-gray-400 tracking-[0.3em] text-xs uppercase mb-3">Priority Mail</p>
            <h1 class="text-3xl font-bold text-white mb-6">
                To: <span class="gold-text">èœåˆ€</span>
            </h1>
            <div class="inline-block px-4 py-2 border border-yellow-500/50 rounded-full text-yellow-200 text-xs animate-pulse">
                Tap to Open
            </div>
        </div>
    </div>

    <!-- 2. ä¸»å¡ç‰‡ -->
    <main id="main-card" class="w-full max-w-md p-6 mx-4">
        <div id="spotlight-card" class="glass-card rounded-2xl p-8 text-center relative overflow-hidden">
            
            <div class="love-battery">
                <i class="fas fa-bolt animate-pulse"></i> 
                <span>Love: 100%</span>
            </div>

            <div class="mb-6 mt-4 relative z-10">
                <p class="text-[10px] tracking-[0.4em] uppercase text-gray-300 mb-2">My Only One</p>
                <h1 class="text-4xl font-bold mb-2">
                    <span class="gold-text">Merry Christmas</span>
                </h1>
                <div class="text-2xl mt-2 animate-pulse">ğŸ„âœ¨</div>
            </div>

            <div class="space-y-5 mb-8 text-gray-100 leading-relaxed font-medium relative z-10">
                <p class="text-2xl font-bold text-white drop-shadow-lg">èœåˆ€ï¼Œè–èª•å¿«æ¨‚ï¼</p>
                <p class="opacity-90 text-lg">
                    æœ€å¥½çš„ç¦®ç‰©ä¸æ˜¯åœ¨ä»»ä½•æ±è¥¿ï¼Œ<br>
                    è€Œæ˜¯æ­¤åˆ»åœ¨æˆ‘çœ¼å‰çš„ä½ ï¼ğŸ˜
                </p>
                <div class="py-2">
                    <p class="opacity-80 text-sm">
                        ç¥æˆ‘å€‘çš„æ„Ÿæƒ…ï¼Œ<br>
                        è·Ÿè–èª•è€å…¬å…¬çš„å¹´é½¡ä¸€æ¨£ä¹…~
                    </p>
                </div>
                <p class="text-pink-300 font-bold text-xl mt-2" style="font-family: 'Parisienne', cursive;">Love you forever</p>
            </div>

            <div class="border-t border-white/10 py-6 relative z-10">
                <p class="text-[10px] text-gray-400 mb-3 tracking-widest uppercase">Time Together</p>
                <div class="grid grid-cols-4 gap-2 text-center">
                    <div class="bg-black/20 rounded-lg p-2 border border-white/5"><span id="days" class="block text-xl font-bold text-yellow-400">0</span><span class="text-[9px] text-gray-400">DAYS</span></div>
                    <div class="bg-black/20 rounded-lg p-2 border border-white/5"><span id="hours" class="block text-xl font-bold text-yellow-400">0</span><span class="text-[9px] text-gray-400">HRS</span></div>
                    <div class="bg-black/20 rounded-lg p-2 border border-white/5"><span id="minutes" class="block text-xl font-bold text-yellow-400">0</span><span class="text-[9px] text-gray-400">MINS</span></div>
                    <div class="bg-black/20 rounded-lg p-2 border border-white/5"><span id="seconds" class="block text-xl font-bold text-yellow-400">0</span><span class="text-[9px] text-gray-400">SECS</span></div>
                </div>
                <div class="mt-4 text-[10px] text-gray-500 italic font-mono">Since 2025.11.14</div>
            </div>

            <div class="border-t border-white/10 pt-6 relative z-10">
                <div id="lock-container" class="transition-all duration-500">
                    <p class="text-xs text-red-300 mb-4 animate-pulse bg-red-900/30 inline-block px-2 py-1 rounded">âš ï¸ è­¦å‘Šï¼šå…§å®¹éç”œï¼Œé™æœ¬äººæŸ¥çœ‹</p>
                    <div class="unlock-btn" id="unlockBtn" onmousedown="startUnlock(event)" onmouseup="stopUnlock()" onmouseleave="stopUnlock()" ontouchstart="startUnlock(event)" ontouchend="stopUnlock()">
                        <svg class="progress-ring absolute top-[-5px] left-[-5px]" width="90" height="90"><circle class="progress-ring__circle" stroke="#fbbf24" stroke-width="4" fill="transparent" r="40" cx="45" cy="45" stroke-dasharray="251.2" stroke-dashoffset="251.2" /></svg>
                        <div class="text-3xl animate-pulse">ğŸ‘†</div>
                    </div>
                    <p class="text-[10px] text-gray-400 mt-3">é•·æŒ‰è§£é–çœŸå¿ƒè©±</p>
                </div>
                <div id="secret-container" class="secret-message text-center">
                    <div class="bg-gradient-to-br from-pink-500/10 to-purple-500/10 rounded-xl p-5 border border-pink-500/20 shadow-inner">
                        <p class="text-lg font-bold text-pink-300 mb-3 border-b border-pink-500/20 pb-2 inline-block">Unlocked! â¤ï¸</p>
                        <div class="text-white text-base leading-loose mb-6 min-h-[80px] font-bold"><span id="typewriter-text"></span><span class="typing-cursor"></span></div>
                        <button id="agreeBtn" onclick="fireworksExplosion(event)" class="opacity-0 transition-opacity duration-1000 bg-white text-pink-600 font-bold py-3 px-6 rounded-full shadow-[0_0_15px_rgba(255,255,255,0.5)] hover:bg-pink-50 transform active:scale-95 text-sm">æˆ‘ä¹Ÿè¦ºå¾—å°¾ç†Šæœ€å¯æ„› ğŸ˜¤</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --- 1. é–‹å¡ ---
        function openCard(event) {
            event.stopPropagation();
            const intro = document.getElementById('intro-screen');
            const cardMain = document.getElementById('main-card');
            intro.classList.add('hidden-screen');
            setTimeout(() => { cardMain.classList.add('show-card'); }, 100);
        }

        // --- 2. Spotlight ---
        const card = document.getElementById('spotlight-card');
        const updateSpotlight = (x, y) => {
            card.style.setProperty('--x', `${x}px`);
            card.style.setProperty('--y', `${y}px`);
        };
        card.addEventListener('mousemove', (e) => {
            const rect = card.getBoundingClientRect();
            updateSpotlight(e.clientX - rect.left, e.clientY - rect.top);
        });
        card.addEventListener('touchmove', (e) => {
            const rect = card.getBoundingClientRect();
            updateSpotlight(e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top);
        });

        // --- 3. è¨ˆæ™‚å™¨ ---
        const startDate = new Date(2025, 10, 14, 0, 0, 0).getTime();
        setInterval(() => {
            const diff = new Date().getTime() - startDate;
            if (diff > 0) {
                document.getElementById('days').innerText = Math.floor(diff / (1000 * 60 * 60 * 24));
                document.getElementById('hours').innerText = String(Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2, '0');
                document.getElementById('minutes').innerText = String(Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
                document.getElementById('seconds').innerText = String(Math.floor((diff % (1000 * 60)) / 1000)).padStart(2, '0');
            }
        }, 1000);

        // --- 4. ç²’å­ç‰¹æ•ˆ ---
        const snowContainer = document.getElementById('snow-container');
        const starContainer = document.getElementById('star-container');
        for (let i = 0; i < 40; i++) {
            const flake = document.createElement('div');
            flake.className = 'snowflake';
            flake.textContent = Math.random() > 0.5 ? 'â„' : 'Â·';
            flake.style.left = Math.random() * 100 + 'vw';
            flake.style.fontSize = (Math.random() * 10 + 10) + 'px';
            flake.style.animationDuration = (Math.random() * 3 + 5) + 's, ' + (Math.random() * 2 + 2) + 's';
            flake.style.animationDelay = Math.random() * 5 + 's';
            snowContainer.appendChild(flake);
        }
        setInterval(() => {
            const star = document.createElement('div');
            star.className = 'shooting-star';
            star.style.left = Math.random() * 100 + 'vw';
            star.style.top = Math.random() * 60 + 'vh';
            star.style.transform = `rotate(${Math.random() * 45}deg)`;
            starContainer.appendChild(star);
            setTimeout(() => star.remove(), 3000);
        }, 3500);

        // --- 5. é»æ“Šæ„›å¿ƒ ---
        const emojis = ['â¤ï¸', 'ğŸ’–', 'ğŸ˜', 'ğŸ’‹', 'âœ¨', 'ğŸ”¥', 'ğŸ'];
        function spawnHeart(event) {
            if(event.target.closest('#unlockBtn') || event.target.closest('#agreeBtn')) return;
            const heart = document.createElement('div');
            heart.className = 'click-heart';
            heart.innerText = emojis[Math.floor(Math.random() * emojis.length)];
            heart.style.left = (event.clientX - 10) + 'px';
            heart.style.top = (event.clientY - 10) + 'px';
            heart.style.fontSize = (Math.random() * 20 + 20) + 'px';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 1000);
        }

        // --- 6. è§£é– & æ‰“å­— ---
        let holdTimer, isLocked = true;
        const circle = document.querySelector('.progress-ring__circle');
        const circumference = circle.r.baseVal.value * 2 * Math.PI;
        circle.style.strokeDasharray = `${circumference} ${circumference}`;
        circle.style.strokeDashoffset = circumference;
        function setProgress(percent) { circle.style.strokeDashoffset = circumference - (percent / 100) * circumference; }
        function startUnlock(e) {
            if (!isLocked) return;
            e.preventDefault(); e.stopPropagation();
            let progress = 0;
            const btn = document.getElementById('unlockBtn');
            btn.style.transform = "scale(0.9)";
            holdTimer = setInterval(() => {
                progress += 4; setProgress(progress);
                if (progress % 20 === 0) spawnHeart({clientX: e.touches ? e.touches[0].clientX : e.clientX, clientY: e.touches ? e.touches[0].clientY : e.clientY});
                if (progress >= 100) { clearInterval(holdTimer); unlockSuccess(); }
            }, 30);
        }
        function stopUnlock() {
            if (!isLocked) return;
            clearInterval(holdTimer); setProgress(0); document.getElementById('unlockBtn').style.transform = "scale(1)";
        }
        function unlockSuccess() {
            isLocked = false;
            document.getElementById('lock-container').style.display = 'none';
            document.getElementById('secret-container').classList.add('secret-revealed');
            setTimeout(startTypewriter, 500);
        }
        const fullText = "å…¶å¯¦æˆ‘ç¬¬ä¸€æ¬¡è¦‹åˆ°ä½ å°±è¦ºå¾—ä½ å¾ˆå¸¥ğŸ‘‰ğŸ»ğŸ‘ˆğŸ»\nä½†æ˜¯æ²’æƒ³åˆ°æœƒåœ¨ä¸€èµ·ğŸ€ğŸ«‚";
        const typeContainer = document.getElementById('typewriter-text');
        let typeIndex = 0;
        function startTypewriter() {
            if (typeIndex < fullText.length) {
                const char = fullText.charAt(typeIndex);
                typeContainer.innerHTML += (char === '\n' ? '<br>' : char);
                typeIndex++; setTimeout(startTypewriter, 150);
            } else {
                document.querySelector('.typing-cursor').style.display = 'none';
                document.getElementById('agreeBtn').style.opacity = '1';
            }
        }

        // --- 7. ç…™ç« ---
        function fireworksExplosion(e) {
            e.stopPropagation();
            const btn = document.getElementById('agreeBtn');
            btn.innerText = "å·²ç°½æ”¶ â¤ï¸";
            btn.disabled = true;
            btn.className = "bg-gray-200 text-gray-500 font-bold py-3 px-6 rounded-full shadow-inner text-sm cursor-not-allowed";
            const canvas = document.getElementById('fireworks-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            let particles = [];
            function createParticle(x, y) {
                for (let i = 0; i < 150; i++) {
                    particles.push({ x: x, y: y, vx: (Math.random() - 0.5) * 15, vy: (Math.random() - 0.5) * 15, life: 120, color: `hsl(${Math.random() * 360}, 100%, 60%)`, size: Math.random() * 3 + 1 });
                }
            }
            createParticle(window.innerWidth/2, window.innerHeight/2);
            setTimeout(() => createParticle(window.innerWidth*0.2, window.innerHeight*0.3), 300);
            setTimeout(() => createParticle(window.innerWidth*0.8, window.innerHeight*0.3), 600);
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach((p, i) => {
                    p.x += p.vx; p.y += p.vy; p.vy += 0.05; p.life--;
                    ctx.globalAlpha = p.life / 120; ctx.fillStyle = p.color;
                    ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2); ctx.fill();
                    if (p.life <= 0) particles.splice(i, 1);
                });
                if (particles.length > 0) requestAnimationFrame(animate);
            }
            animate();
        }
    </script>
</body>
</html>

